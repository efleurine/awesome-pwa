# PWA学习总结
1.分享前先做一个声明，不会讲太多细节，这次分享的目的是引起大家的对PWA的兴趣，PWA里面任何一个技术点要讲很清楚可能都需要几个小时。

## Demo演示
1. 在介绍PWA之前，先看一个Demo，先有一个直观的感受。
2. 这个是我很早之前写的一个周刊聚合阅读的小应用。我把自己经常看的两个周刊爬下来，方便阅读。可以看到页面加载特别慢。为什么慢呢，首先是因为放在heroku上，国内访问速度比较慢，有时候可能还需要翻墙。然后，我在服务端是没有做任何缓存的，每次请求都是实时去爬取页面，然后解析爬取到的HTML，最后组装成JSON返回给前端。大家可能已经发现了，虽然第一次访问比较慢，但之后的访问速度就特别快。比方说...。为什么这么快，可以看下网络请求，大家看Size这一列。很多请求都是(from ServiceWorker)，这就是快的原因，这些请求并不是从服务端返回的，而是从本地缓存里返回的。具体我们可以看下Application下面的数据...。

## PWA是什么
1. 我们再来看PWA究竟是什么。
2. PWA是...缩写。看到Propressive这个单词，估计很多人会立即联想到一个概念叫“渐进增强”。是的，就是这个意思。举个例子，有一个传统的Mobile Web，你想优化它的用户体验，比方说在2G/3G弱网络环境下能够快速访问，就可以考虑使用[Cache API](https://developer.mozilla.org/en-US/docs/Web/API/Cache)来做缓存提高重复访问的速度。但在不支持Cache API的终端下，网站可以走网络请求依然能够正常运行。

## PWA为什么重要
1. 然后说一下为什么PWA这么重要。...里程碑技术。
2. 它也是Google近两年大力在推广的技术，最近两年Google I/O大会上都有很多PWA的分享。PWA本身也有自己的行业会议。
3. 说个小细节，这两张图片里面，有一个人都出现了，就是Jake Archibald。你如果学习PWA应该能看到他写的很多文章，Google开发者网站上的很多ServiceWorker相关文章都是他写的。
4. 这是他的博客，非常推荐他16年Google I/O大会上构建离线优先PWA的分享，讲得非常有趣。
5. 当然不是说Google推广的技术就重要，我们还是要摆事实讲道理。我们来看几张图片。
6. 有机构做过这样的调查研究...。首先说性能，其实随着硬件的快速迭代和进化，Mobile Web性能越来越好, 通过努力在视觉和页面交互体验上甚至可以趋近Native。关于这一点非常推荐大家看下去年D2上天猫超市一个前端的分享，可以学习一下他们的研究和经验。 除了性能，Native...然用户花比Web多得多的时间，拆解开来说，关键功能，比方说消息推送，虽然我自己把几乎所有app的消息推送都禁掉了，但我也知道很多人，比方说我女朋友，她从来不禁止推送，所以她的手机永远都是满屏红点...。消息推送我觉得是双刃剑，用得不好很打扰用户。所以Google IO上也有关于推送什么，什么时候推送的分享，大家有兴趣可以找来看。facebook, twitter, whatsApp，国内可能更极端70/80%都花了在微信上。对于很多的小公司，考虑到比Web大得多的开发成本，从成本收益上考虑是否值得呢。最后再一张图，PWA兼具了App和Web的优势。

## 怎么写一个PWA
1. 好，说完是什么，为什么，再说怎么做。
2. Medium上有一篇文章教你怎么样五分钟内做一个PWA应用。我录了一个视频，大家可以看下。Firebase这一块可以忽略，是为了把应用部署到Firebase，不是PWA本身的一部分。Firebase message接口做消息推送的，如果自己写的话不是这样写。
3. 其实这篇文章包含了PWA的主要内容，但你如果真的这样做然后把应用发到生产，可能P0事故就离你不远了。
4. 所以要写好一个健壮的PWA应用，还是需要认认真真研究每一个技术点。

## PWA核心技术
1. 包括...。

## Application Manifest.json
1. 他是一个JSON文件，包含了一些配置
2. 这个文件的作用主要有两个，触发浏览器弹一个对话框问你是否添加应用到手机主屏。
3. 其次对添加到手机主屏的Web App做一些外观设置。
4. 我们可以看具体的配置项，我这里只是列举了部分配置项，更全面的可以阅读下面连接的页面。可以看两个例子。
5. 添加到主屏的效果大概是这样的。关于添加到主屏弹框的出现，其实是有标准的，而且这个标准可能会变动。Google网站给的标准是这样的。过了五分钟后又来访问你的网站。

## ServiceWorker
1. 是什么。
2. 可以监听哪些事件。后台同步，Notification讲解。
3. ServiceWorker生命周期。
4. 上代码。activate首次第二次区别。像这些细节等我下次在项目里实践过了，再总结一下，可以再分享一次。
5. 当然这些都是简化的代码，有一些细节问题都没有处理。比如fetch请求失败了，是不是不应该缓存response。

## 缓存策略
1. 再来说说缓存策略。缓存策略有很多，大概有这么几类。
2. 其实真是场景中可能要综合使用各种缓存策略，不同的资源，不同的场景需要不同的缓存策略。


## Web Push & Notification
1. 其实涉及到两块内容，Push API and Notification API。

## Background sync
1. 看ppt。

